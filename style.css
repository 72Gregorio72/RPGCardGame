:root{
  --bg: #0f1220;
  --panel: #171a2b;
  --panel-2: #1d2138;
  --text: #e9ecff;
  --muted: #a7b0d7;
  --primary: #6c7cff;
  --success: #17c964;
  --accent: #ffd166;
  --danger: #ff4d4f;
  --card: #0c0f1c;
  --card-border: #2a2f51;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius-xl: 18px;
  --radius-lg: 14px;
  --radius-md: 12px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 600px at 70% -10%, #1a1f3a 0, #0e1120 60%) no-repeat, var(--bg);
  color: var(--text);
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.06) 2px, transparent 2px),
                    radial-gradient(rgba(108, 124, 255, 0.05) 1px, transparent 1px);
  background-size: 40px 40px, 60px 60px;
  animation: casinoMove 40s linear infinite;
  z-index: 0;
  pointer-events: none;
}

@keyframes casinoMove {
  from { background-position: 0 0, 0 0; }
  to   { background-position: 400px 400px, -300px 600px; }
}

/* alziamo il contenuto sopra */
.app, .topbar, .layout, .overlay {
  position: relative;
  z-index: 1;
}


.app{max-width:1100px;margin:0 auto;padding:24px 16px}

.topbar{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 20px;background:linear-gradient(160deg,var(--panel),var(--panel-2));
  border:1px solid #2a2f51;border-radius:var(--radius-xl);box-shadow:var(--shadow)
}
.topbar h1{margin:0;font-size:22px;letter-spacing:.5px}
.controls{display:flex;gap:8px}

.layout{
  display:grid;grid-template-columns: 320px 1fr;gap:16px;margin-top:16px
}
@media (max-width: 880px){ .layout{grid-template-columns:1fr} }

.panel{
  background: linear-gradient(160deg,var(--panel),var(--panel-2));
  border:1px solid #2a2f51;border-radius:var(--radius-xl); padding:18px; box-shadow:var(--shadow)
}
.panel h2{margin:6px 0 12px 0;font-size:18px;color:#cdd4ff}
.panel--build{position:sticky;top:16px;align-self:start}

.build{
  display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:8px
}
.stat{
  background: rgba(255,255,255,.02);
  border:1px solid var(--card-border);
  border-radius: var(--radius-lg);
  padding:10px 12px;display:flex;align-items:center;gap:10px
}
.stat .ico{font-size:20px}
.stat .val{font-weight:700;font-size:18px}
.stat.heart{--color:#ff5a79}
.stat.diamond{--color:#ffd166}
.stat.club{--color:#28d79f}
.stat.spade{--color:#6bb7ff}
.stat .ico{color:var(--color)}
.stat .val{color:var(--color)}

.turno{margin:14px 0 10px 0;display:grid;gap:8px}
.turno__row{display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,.02);border:1px solid var(--card-border);padding:8px 10px;border-radius:var(--radius-md)}
.badge{
  font-size:12px;padding:3px 8px;border-radius:999px;background:#252a4b;border:1px solid #323a66;color:#cdd4ff
}
.turno__value{font-weight:700}

.azioni-gioco{margin:12px 0 8px;display:grid;gap:8px}
.azioni-gioco .buttons{display:flex;gap:8px}
.buttons.center{justify-content:center}

.btn{
  appearance:none;border:none;cursor:pointer;border-radius:12px;
  padding:10px 14px;background:#2a2f51;color:#e9ecff;font-weight:700;
  transition: transform .05s ease, filter .15s ease, background .15s ease, box-shadow .2s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,.25)
}
.btn:hover{filter:brightness(1.08)}
.btn:active{transform: translateY(1px)}
.btn.primary{background:linear-gradient(160deg,#5f6bff,#7f89ff)}
.btn.success{background:linear-gradient(160deg,#18c964,#1edf7a)}
.btn.danger{background:linear-gradient(160deg,#ff5a79,#ff7b95)}
.btn:disabled{opacity:.5;cursor:not-allowed}

.carte-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(110px,1fr));
  gap:12px
}
.selezionabili .carta{cursor:pointer;transition: transform .15s ease, box-shadow .15s ease}
.selezionabili .carta:hover{transform: translateY(-4px)}
.carta.selezionata{outline:2px solid #a2b0ff; box-shadow: 0 10px 20px rgba(162,176,255,.2) inset, 0 6px 20px rgba(0,0,0,.3)}

.carta{
  background: radial-gradient(120px 70px at 30% 15%, #131733, #0d1024);
  border:1px solid var(--card-border);
  border-radius:16px;
  min-width:110px; aspect-ratio: 11 / 7;
  display:grid; grid-template-rows: auto 1fr auto;
  padding:8px;
  box-shadow: var(--shadow);
  position:relative; overflow:hidden;
  height: 150px;
  width: 110px;
}
.carta::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(200px 100px at 120% -10%, rgba(255,255,255,.07), transparent 50%)
}
.carta__top{display:flex; justify-content:flex-start; align-items:center}
.carta__bottom{display:flex; justify-content:flex-end; align-items:center}
.carta__valore{font-weight:800}
.carta__seme{
  display:flex; align-items:center; justify-content:center;
  font-size:26px; line-height:1; margin:6px 0
}

/* colori semi */
.heart .carta__valore, .heart .carta__seme{color:#ff5a79}
.diamond .carta__valore, .diamond .carta__seme{color:#ffd166}
.club .carta__valore, .club .carta__seme{color:#28d79f}
.spade .carta__valore, .spade .carta__seme{color:#6bb7ff}

/* overlay gameover */
.overlay{position:fixed; inset:0; background:rgba(5,7,15,.72); display:flex; align-items:center; justify-content:center}
.hidden{display:none}
.modal{
  width:min(520px,90vw); background:linear-gradient(160deg,var(--panel),var(--panel-2));
  border:1px solid #2a2f51; border-radius:20px; padding:24px; box-shadow:var(--shadow); text-align:center
}

/* log */
.log{
  margin-top:10px; background:rgba(255,255,255,.02); border:1px solid var(--card-border);
  border-radius: var(--radius-lg); padding:10px; max-height:240px; overflow:auto; font-size:14px; color:var(--muted)
}
.log p{margin:.4em 0}
.log .ok{color:#9be2b2}
.log .ko{color:#ff9aa6}
.log .info{color:#e7e4ff}

@keyframes flip-card {
  from { transform: rotateY(0deg); }
  to   { transform: rotateY(180deg); }
}
.carta.anim-flip {
  animation: flip-card 0.6s;
  backface-visibility: hidden;
}

@keyframes highlight-card {
  0%   { box-shadow: 0 0 0 0 #6c7cff88; }
  50%  { box-shadow: 0 0 20px 12px #6c7cff88; }
  100% { box-shadow: 0 0 0 0 #6c7cff88; }
}
.carta.anim-highlight {
  animation: highlight-card 0.7s;
}

@keyframes score-bounce {
  0%   { transform: scale(1); color: inherit; }
  25%  { transform: scale(1.35); color: var(--success); }
  60%  { transform: scale(0.88);}
  100% { transform: scale(1); color: inherit; }
}
.score-anim {
  animation: score-bounce 0.6s;
}
